<!DOCTYPE html>
<script>
    window.log = function() {
        console.log.apply(console, arguments);
    };
</script>
<html>
<head>
    <meta charset='utf-8'>
    <title>野球愛好会</title>
    <script src='public/js/vendor.min.js'></script>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>

    <script src='public/js/application.js'></script>
    <!--<script src='js/application.min.js'></script>-->

    <link rel='shortcut icon' href='public/yakk.ico'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <link rel='stylesheet' type='text/css' href='public/css/bootstrap.min.css' >
    <link rel='stylesheet' type='text/css' href='public/css/application.css'>

    <script type='mystery-shader' class='sky4'>
        /*

        Based on "A Practical Analytic Model for Daylight"
        aka The Preetham Model, the de facto standard analytic skydome model
        http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf

        First implemented by Simon Wallner http://www.simonwallner.at/projects/atmospheric-scattering

        Improved by Martin Upitis http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR

        Three.js integration by zz85 http://twitter.com/blurspline

        */

        uniform sampler2D skySampler;
        uniform vec3 sunPosition;
        varying vec3 vWorldPosition;
        varying vec2 vUv;


        vec3 cameraPos = vec3(0., 0., 0.);
        // uniform sampler2D sDiffuse;
        // const float turbidity = 10.0; //
        // const float reileigh = 2.; //
        // const float luminance = 1.0; //
        // const float mieCoefficient = 0.005;
        // const float mieDirectionalG = 0.8;

        uniform float luminance;
        uniform float turbidity;
        uniform float reileigh;
        uniform float mieCoefficient;
        uniform float mieDirectionalG;


        vec3 sunDirection = normalize(sunPosition);
        float reileighCoefficient = reileigh;

        // constants for atmospheric scattering
        const float e = 2.71828182845904523536028747135266249775724709369995957;
        const float pi = 3.141592653589793238462643383279502884197169;

        const float n = 1.0003; // refractive index of air
        const float N = 2.545E25; // number of molecules per unit volume for air at
                                // 288.15K and 1013mb (sea level -45 celsius)
        const float pn = 0.035;	// depolatization factor for standard air

        // wavelength of used primaries, according to preetham
        const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);

        // mie stuff
        // K coefficient for the primaries
        const vec3 K = vec3(0.686, 0.678, 0.666);
        const float v = 4.0;

        // optical length at zenith for molecules
        const float rayleighZenithLength = 8.4E3;
        const float mieZenithLength = 1.25E3;
        const vec3 up = vec3(0.0, 1.0, 0.0);

        const float EE = 1000.0;
        const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;
        // 66 arc seconds -> degrees, and the cosine of that

        // earth shadow hack
        const float cutoffAngle = pi/1.95;
        const float steepness = 1.5;


        vec3 totalRayleigh(vec3 lambda)
        {
            return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));
        }

        float rayleighPhase(float cosTheta)
        {
            return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));
        //	return (1.0 / (3.0*pi)) * (1.0 + pow(cosTheta, 2.0));
        //	return (3.0 / 4.0) * (1.0 + pow(cosTheta, 2.0));
        }

        vec3 totalMie(vec3 lambda, vec3 K, float T)
        {
            float c = (0.2 * T ) * 10E-18;
            return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;
        }

        float hgPhase(float cosTheta, float g)
        {
            return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));
        }

        float sunIntensity(float zenithAngleCos)
        {
            return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));
        }

        // float logLuminance(vec3 c)
        // {
        // 	return log(c.r * 0.2126 + c.g * 0.7152 + c.b * 0.0722);
        // }

        // Filmic ToneMapping http://filmicgames.com/archives/75
        float A = 0.15;
        float B = 0.50;
        float C = 0.10;
        float D = 0.20;
        float E = 0.02;
        float F = 0.30;
        float W = 1000.0;

        vec3 Uncharted2Tonemap(vec3 x)
        {
           return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;
        }


        void main()
        {
            float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);

            // luminance =  1.0 ;// vWorldPosition.y / 450000. + 0.5; //sunPosition.y / 450000. * 1. + 0.5;

             // gl_FragColor = vec4(sunfade, sunfade, sunfade, 1.0);

            reileighCoefficient = reileighCoefficient - (1.0* (1.0-sunfade));

            float sunE = sunIntensity(dot(sunDirection, up));

            // extinction (absorbtion + out scattering)
            // rayleigh coefficients
            vec3 betaR = totalRayleigh(lambda) * reileighCoefficient;

            // mie coefficients
            vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;

            // optical length
            // cutoff angle at 90 to avoid singularity in next formula.
            float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));
            float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));
            float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));



            // combined extinction factor
            vec3 Fex = exp(-(betaR * sR + betaM * sM));

            // in scattering
            float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);

            float rPhase = rayleighPhase(cosTheta*0.5+0.5);
            vec3 betaRTheta = betaR * rPhase;

            float mPhase = hgPhase(cosTheta, mieDirectionalG);
            vec3 betaMTheta = betaM * mPhase;


            vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));
            Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));

            //nightsky
            vec3 direction = normalize(vWorldPosition - cameraPos);
            float theta = acos(direction.y); // elevation --> y-axis, [-pi/2, pi/2]
            float phi = atan(direction.z, direction.x); // azimuth --> x-axis [-pi/2, pi/2]
            vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);
            // vec3 L0 = texture2D(skySampler, uv).rgb+0.1 * Fex;
            vec3 L0 = vec3(0.1) * Fex;

            // composition + solar disc
            //if (cosTheta > sunAngularDiameterCos)
            float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);
            // if (normalize(vWorldPosition - cameraPos).y>0.0)
            L0 += (sunE * 19000.0 * Fex)*sundisk;


            vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));

            vec3 texColor = (Lin+L0);
            texColor *= 0.04 ;
            texColor += vec3(0.0,0.001,0.0025)*0.3;

            float g_fMaxLuminance = 1.0;
            float fLumScaled = 0.1 / luminance;
            float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (g_fMaxLuminance * g_fMaxLuminance)))) / (1.0 + fLumScaled);

            float ExposureBias = fLumCompressed;

            vec3 curr = Uncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);
            vec3 color = curr*whiteScale;

            vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));


            gl_FragColor.rgb = retColor;

            gl_FragColor.a = 1.0;
        }
    </script>
    <script type='mystery-shader' class='vertexShader'>
        varying vec3 vWorldPosition;
        varying vec2 vUv;

        void main() {

            vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
            vWorldPosition = worldPosition.xyz;
            vUv = uv;

            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

        }
    </script>
</head>
<body class='blue' id='override'>
<div class='container' ng-app='YakyuuAikoukai' ng-controller='IndexController'>
    <div class='blocking instructions'>
        <section class='row'>
            <div class='col-md-4'></div>
            <div class='col-md-4 language-select'>
                <span>
                    {{ t('Select Language:') }} &nbsp;
                </span>
                <hr>
                <button class='btn pointer' ng-click='mode("e"); $event.stopPropagation()'>
                    English
                </button>
                <button class='btn pointer' ng-click='mode("n"); $event.stopPropagation()'>
                    日本語
                </button>
            </div>
            <div class='col-md-4'></div>
        </section>
        <br/>
        <div class='row'>
            <div class='col-md-4'>
                <p ng-show='mode() == "e"'>
                    When catching, click in the strike/ball zone to locate a pitch. Opponent batting swing locations are
                    signaled by a bat icon. A grey circle will indicate where the ball crossed home plate.
                </p>
                <p ng-show='mode() == "n"'>
                    守備でのは捕手役でプレーを行う。ストライクゾーンにクリックすると、投手を狙い投げさせる。バットが
                    現れるところがバッターの振り。灰色のまるはストライクゾーンに入ったところ。
                </p>
            </div>
            <div class="col-md-4">
                <div class="target swing">
                    <div class='indicator baseball pitch' style='top:125px;left:155px;'></div>
                    <div class='indicator baseball break' style='top:145px;left:135px;'></div>
                    <div class='strikezone'></div>
                </div>
            </div>
            <div class='col-md-4'>
                <p ng-show='mode() == "e"'>
                    You can call for a different pitch by clicking on the pitch name below the field display.
                </p>
                <p ng-show='mode() == "n"'>
                    ストライクゾーンの下に投手のどの球で挑戦することも選択できる。
                </p>
            </div>
        </div>
        <div class='row'>
            <div class='col-md-4'>
                <p ng-show='mode() == "e"'>
                    When batting, you'll see a ball...
                    Click inside the pitch zone to locate your swing, or don't click to hold up (not swing) and try to draw a walk or wait for a better pitch.
                </p>
                <p ng-show='mode() == "n"'>
                    攻撃でのはバッター役を次々務める。投球が飛んでくるときにストライクゾーンにクリックすれば、バットを振る。しない場合は見送る。打てる球待つんだ！
                </p>
            </div>
            <div class="col-md-4">
            </div>
            <div class='col-md-4'>
                <p ng-show='mode() == "e"'>
                    To restart into a new game simply reload the page. You can also share the URL of your game to play
                    against a friend. This may not be available depending on server status.
                </p>
                <p ng-show='mode() == "n"'>
                    新しい試合を再開したいときにウエブページをリロードしてください。一人の友達も同じURLに誘えば、相手としては勤められています。
                </p>
            </div>
        </div>
        <section class='row options'>
            <div class='col-md-12'>
                <button ng-click="proceedToGame(); $event.stopPropagation()" class='btn play-ball pointer'>
                    {{ t('Play Ball!') }}
                </button>
                <button ng-click="proceedToGame(false, true); $event.stopPropagation()" class='btn pointer'>
                    {{ t('Spectate the CPU') }}
                </button>
                <button ng-click='proceedToGame(true, true); $event.stopPropagation()' class='btn pointer'>
                    {{ t('Run Fast Simulation') }} &raquo;
                </button>
                <button ng-click='proceedToGame(7); $event.stopPropagation()' class='btn pointer'>
                    {{ t('Play from the 7th') }} &raquo;
                </button>
            </div>
        </section>
        <section class='baseball-beginner text-left'>
            <div ng-show='mode() == "e"'>
                <h3>Catching</h3>
                <ul>
                    <li>A pitch down the middle is easier to hit, but a pitch on the corners is more likely a ball.</li>
                    <li>You control where to pitch, but a more skilled pitcher will execute more accurately.</li>
                    <li>Throwing pitches to the same location repeatedly makes them easier to see and hit.</li>
                    <li>A low pitch is more likely to draw a ground ball, and a high pitch a fly ball.</li>
                    <li>When ahead in the count, spot a pitch outside the strike zone to draw a strikeout.</li>
                    <li>The pitcher will lose some control due to fatigue over the course of the game.</li>
                    <li>Your fielders have varied defensive skills. If your outfielders are strong but your infielders weak, try pitching high.</li>
                </ul>
                <h3>Batting</h3>
                <ul>
                    <li>A batter's eye improves with more pitches seen in an at-bat.</li>
                    <li>Wait for the pitch! Don't swing early.</li>
                    <li>Batters have three traits: power, speed, and eye.</li>
                    <li>Speedier batters are less likely to be thrown out on the basepaths or on a ground ball.</li>
                    <li>A batter with a good eye can turn even a pitch outside the strike zone into a base hit.</li>
                    <li>Not sure if that junk pitch is a strike or ball? Hit it at an angle to foul it off.</li>
                    <li>You can recognize pitches by their seam rotation if you look closely.</li>
                </ul>
                <h6><em>Notation</em></h6>
                <ul>
                    <rating-block rating-block='' rating='110'></rating-block> : High skill rating
                    <br/>
                    <rating-block rating-block='' rating='25'></rating-block> : Low skill rating
                    <br/>
                    <span class="glyphicon glyphicon-chevron-up"></span> : Elite player
                </ul>
            </div>
            <div ng-show='mode() == "n"'>
                <h3>捕球</h3>
                <ul>
                    <li>真ん中の球は打ちやすい、内角や低めのは難しい</li>
                    <li>捕手としてはピッチングが選択できるが、制球は投手次第</li>
                    <li>同じコースで投げすぎと、打ちやすくなる</li>
                    <li>低めのコースはゴロを誘導し、高めはフライのほう</li>
                    <li>いいカウントに入ったとき、ボールコースの一球で三振をとる</li>
                    <li>ピッチャーは少しづつ疲れていく</li>
                    <li>野手の守備は不確定。内野手たちの方が強いならば、低めのコースを使うべき</li>
                </ul>
                <h3>打撃</h3>
                <ul>
                    <li>打席中に球を見送る旅に目が鋭くなれる</li>
                    <li>早振りはしない為にボールをよく待って打つ</li>
                    <li>各バッターは３つの属性で評価されている：目（バット・コントロールと選球眼）、力（長打）、速（走塁）</li>
                    <li>足の速いバッターはゴロでも出塁できる</li>
                    <li>目が鋭いバッターはボールコースの球でも打てる</li>
                    <li>ボールコースかどうかが分からない時にこそ、当てるだけのファウルで生き残る</li>
                    <li>球種にはよく見れば縫い目で区別にもできる</li>
                </ul>
                <h6><em>アイコン</em></h6>
                <ul>
                    <rating-block rating-block='' rating='110'></rating-block> : 強い属性
                    <br/>
                    <rating-block rating-block='' rating='25'></rating-block> : 「まあ、頑張ってね」属性
                    <br/>
                    <span class="glyphicon glyphicon-chevron-up"></span> : ヒーロー選手
                    <br>
                    <strong>+</strong> : {{ t('RBI') }}
                </ul>
            </div>
        </section>
    </div>
    <div scoreboard='' game='y' text='t'></div>
    <hr>
    <div class='diamond-display row'>
        <div class='col-md-4 language-select'>
            <div class='pull-right'>
                <button class='btn small' ng-click='mode("e")' ng-class='{disabled: mode() != "e"}'>
                    <strong class='pointer' >English</strong>
                </button>
                <br>
                <button class='btn small' ng-click='mode("n")' ng-class='{disabled: mode() != "n"}'>
                    <strong class='pointer'>日本語</strong>
                </button>
                <br/>
                <br/>
                <!--<p>-->
                    <!--{{ y.timeOfDay.h }}:{{ y.timeOfDay.m }}-->
                <!--</p>-->
            </div>
        </div>
        <div class='col-md-4'>
            <div class='splay-indicator-wrapper'>
                <div class='splay-indicator'>
                    <div class='splay-indicator-ball' ng-show='y.swingResult.contact'
                         ng-style='{
                                    bottom: y.swingResult.bottom,
                                    left: y.swingResult.left
                                }'>
                    </div>
                </div>
            </div>
            <div class='text-center steal-controls' ng-show='y.humanBatting() && y.field.getLeadRunner() && !y.opponentConnected'>
                <button class='btn pointer small' ng-click='y.batter.team.stealAttempt = y.batter.team.constructor.RUNNER_GO'
                        ng-class='{disabled: y.batter.team.stealAttempt != y.batter.team.constructor.RUNNER_GO}'>
                    {{ t('Steal') }}
                </button>
                <button class='btn pointer small' ng-click='y.batter.team.stealAttempt = y.batter.team.constructor.RUNNERS_DISCRETION'
                        ng-class='{disabled: y.batter.team.stealAttempt != y.batter.team.constructor.RUNNERS_DISCRETION}'>
                    {{ t('Opportunistic') }}
                </button>
                <button class='btn pointer small' ng-click='y.batter.team.stealAttempt = y.batter.team.constructor.RUNNER_HOLD'
                        ng-class='{disabled: y.batter.team.stealAttempt != y.batter.team.constructor.RUNNER_HOLD}'>
                    {{ t('Hold') }}
                </button>
            </div>
            <aside class='left image-panel' ng-style='{ backgroundImage: imagePanel.left }'></aside>
            <aside class='right image-panel' ng-style='{ backgroundImage: imagePanel.right }'></aside>
        </div>
        <div class='col-md-4'>
        </div>
    </div>
    <hr>
    <div class='main-area noselect row'>
        <field field=''>

        </field>
        <div class='webgl-bg-container'></div>
        <div class='webgl-container'></div>
        <div class='row'>
            <div class='col-md-4 background-color visible-lg visible-md'>
                <!--<div ng-repeat='(key, val) in y.swingResult'>-->
                <!--{{key}} : {{val}}-->
                <!--</div>-->
                <ul class="list-group pitch-record">
                    <li class='list-group-item' ng-repeat="event in y.log.pitchRecord[mode()] track by $index">
                        <strong ng-if="$index == 0">
                            {{event}}
                        </strong>
                        <span ng-if="$index">
                            {{event}}
                        </span>
                    </li>
                </ul>
            </div>
            <div class='col-md-4'>
                <div class='opponent-indicator' ng-show='y.opponentConnected'>
                    <em>{{ t('Opponent connected') }}</em>
                </div>
                <div class='windup' ng-show='!y.opponentConnected' ng-class='{winding: y.humanControl == "none" || (y.humanBatting() && !y.humanPitching())}'>
                </div>
                <div class="no-swing">
                    <div class='input-area' ng-click='indicate($event)'>

                    </div>
                    <div class="target live {{y.stage}}" ng-class='{
                        batting: y.humanBatting(),
                        pitching: y.humanPitching()
                    }'>
                        <div class='indicator baseball pitch hide'></div>
                        <div class='indicator baseball break hide'></div>
                        <div class='indicator swing player'
                             ng-style='{
                                    top: 200-y.pitchInFlight.y-y.swingResult.y + "px",
                                    left: y.pitchInFlight.x + y.swingResult.x + "px",
                                    transform: "rotate(" + y.swingResult.angle + "deg) rotateY("+(y.batterRunner.bats == "left" ? 12 : -12)+"deg)"
                                }'
                             ng-class='{
                                 left: y.batterRunner.bats == "left",
                                 right: y.batterRunner.bats == "right",
                                 hide: y.humanBatting() || y.swingResult.looking
                             }'>
                        </div>
                        <div class='indicator swing stance-indicator opponent'
                             ng-class='{
                                left: y.batter.bats == "left",
                                right: y.batter.bats == "right",
                                hide: !y.humanBatting()
                             }'>
                        </div>
                        <div class='indicator glove stance-indicator hide'
                             ng-class='{
                                left: y.pitcher.team.positions.catcher.throws == "left",
                                right: y.pitcher.team.positions.catcher.throws == "right",
                                hide: !y.humanPitching()
                             }'>
                        </div>
                        <div class='strikezone' ng-class='{batting: y.humanBatting(), pitching: y.humanPitching()}'>
                            <span class='strikezone-message' ng-show='showMessage'>
                                {{ t('Click Here') }}
                            </span>
                        </div>
                    </div>
                </div>
                <div class='centered'>
                    <div class='batter-stats' ng-class='{"lefty": y.batter.bats == "left", "righty": y.batter.bats == "right"}'>
                        <span ng-show='y.batter.bats==="left"'>
                            <span ng-if="y.batter.hero" class="glyphicon glyphicon-chevron-up"></span>
                            {{ t('LHB') }}
                        </span>
                        {{ t('Eye :') }}
                        <rating-block rating-block='' rating='y.batter.skill.offense.eye'></rating-block>
                        {{ t('Power :') }}
                        <rating-block rating-block='' rating='y.batter.skill.offense.power'></rating-block>
                        {{ t('Speed :') }}
                        <rating-block rating-block='' rating='y.batter.skill.offense.speed'></rating-block>
                        <span ng-show='y.batter.bats==="right"'>
                            {{ t('RHB') }}
                            <span ng-if="y.batter.hero" class="glyphicon glyphicon-chevron-up"></span>
                        </span>
                    </div>
                </div>
                <div class='chalklines'>
                    <!--<span class='homeplate'></span>-->
                </div>
            </div>
            <div class='col-md-4 background-color visible-lg visible-md'>
                <ul class="list-group play-record">
                    <li class='list-group-item' ng-repeat="event in y.log.shortRecord[mode()] track by $index">
                        <strong ng-if="$index == 0">
                            {{event}}
                        </strong>
                        <span ng-if="$index">
                            {{event}}
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <hr>
    <div class='visible-sm visible-xs centered'>
        {{ y.log.pitchRecord[mode()][0] }}
    </div>
    <!--<div class="umpire centered">-->
        <!--Umpire: {{y.umpire.says}}-->
    <!--</div>-->
    <hr class='visible-sm visible-xs centered'>
    <ul class='centered list-inline pitch-selection'>
        <li class='pointer' ng-repeat='(name, pitch) in y.pitcher.pitching' ng-click="y.humanPitching() && selectPitch(name)">
            <span>
                <button class='pointer btn small' ng-class='{disabled: y.pitchInFlight.name !== name}'>
                    {{ t(name) }}
                </button>
                <br>
                <rating-block rating-block='' rating='pitch.control'></rating-block>
                <rating-block rating-block='' rating='pitch.velocity'></rating-block>
                <rating-block rating-block='' rating='pitch.break'></rating-block>
            </span>
        </li>
        <br class='visible-xs'/>
        <li class='pitch-selection-label'>
            {{ t('Control') }} / {{ t('Velocity') }} / {{ t('Break') }}
        </li>
    </ul>
    <hr/>
    <div class='row'>
        <section class='col-xs-12'>
            <batters batters='' class='batter-data col-sm-6' ng-show='y.half === "top"'>
            </batters>
            <battery battery='' class='pitcher-data col-sm-6' ng-show='y.half === "top"'>
            </battery>

            <battery battery='' class='pitcher-data col-sm-6' ng-show='y.half === "bottom"'>
            </battery>
            <batters batters='' class='batter-data col-sm-6' ng-show='y.half === "bottom"'>
            </batters>
        </section>
    </div>
    <hr/>
    <div class='block stabilized col-lg-12 hidden-lg hidden-md'>
        <ul class="list-group pitch-record col-xs-6">
            <li class='list-group-item' ng-repeat="event in y.log.stabilized.pitchRecord[mode()] track by $index">
                {{event}}
            </li>
        </ul>
        <ul class="list-group pitch-record col-xs-6">
            <li class='list-group-item' ng-repeat="event in y.log.stabilized.shortRecord[mode()] track by $index">
                {{event}}
            </li>
        </ul>
        <hr/>
    </div>
    <div class='clear'></div>
    <div class='col-lg-12 batting-lines'>
        <ul class='list-group col-lg-6' ng-repeat='team in [y.teams.away, y.teams.home] track by $index' ng-class='{click_to_sub: !!team.sub}'>
            <li class='list-group-item team-name'>
                {{team.getName()}}
            </li>
            <li class='list-group-item pointer lineup' ng-repeat="(order, player) in team.lineup track by $index"
                ng-click='clickLineup(player)' >
                {{abbreviatePosition(player.position)}}<rating-block rating-block='' rating='player.skill.defense.fielding'></rating-block> &raquo;
                <strong>{{player.getName()}}</strong> ({{'#'+player.number}}) <span ng-if='player.hero' class='glyphicon glyphicon-chevron-up'></span>
                <span class='pull-right'>
                    <span class='action-line' ng-repeat='atBat in player.getAtBats() track by $index'
                          ng-class='{beneficial: atBat.beneficial}'>
                        {{ atBat + '' }}
                    </span>
                    <em>{{order == player.team.nowBatting ? ' - ' + t('Up to Bat') : ''}}</em>
                </span>
                <div class='row'></div>
                <section ng-if='player.team.expanded == player'>
                    <div class='visible-md-inline visible-lg-inline'>
                        {{ t('Throws/Bats') }} {{t(player.throws == 'left' ? 'L' : 'R ')}}{{t.slash()}}{{t(player.bats == 'left' ? ' L ' : ' R ')}}
                    </div>
                    <ul class='list-inline personal-stats row' ng-init='stats = player.stats.batting'>
                        <li class='col-md-1'></li>
                        <li class='col-md-3'>{{ t('BA') }} <br> {{ stats.ba | number:3 }} ({{ stats.getBA() | number:3 }})</li>
                        <li class='col-md-1'>{{ t('OBP') }} <br> {{ stats.getOBP() | number:3 }}</li>
                        <li class='col-md-1'>{{ t('SLG') }} <br> {{ stats.getSLG() | number:3 }}</li>
                        <li class='col-md-1'>{{ t('PA') }} <br> {{ stats.pa }}</li>
                    </ul>
                    <hr/>
                    <ul class='list-inline personal-stats row'>
                        <li class='col-md-1'></li>
                        <li class='col-md-3'>{{ t('H/2B/3B/HR') }} <br> {{ stats.h }} - {{ stats['2b'] }} - {{ stats['3b'] }} - {{ stats.hr }}</li>
                        <li class='col-md-1'>{{ t('RBI') }} <br> {{ stats.rbi }}</li>
                        <li class='col-md-1'>{{ t('R') }} <br> {{ stats.r }}</li>
                        <li class='col-md-1'>{{ t('BB') }} <br> {{ stats.bb }}</li>
                        <li class='col-md-1'>{{ t('SO') }} <br> {{ stats.so }}</li>
                    </ul>
                    <span>
                        {{ t('Eye :') }} <rating-block rating-block='' rating='player.skill.offense.eye'></rating-block>
                    </span>
                    <span>
                        {{ t('Power :') }} <rating-block rating-block='' rating='player.skill.offense.power'></rating-block>
                    </span>
                    <span>
                        {{ t('Speed :') }} <rating-block rating-block='' rating='player.skill.offense.speed'></rating-block>
                    </span>
                </section>
            </li>
            <li class='list-group-item pointer' ng-repeat='(key, player) in team.bench track by $index'
                ng-click='selectSubstitute(player)' ng-class='{selected_sub: team.sub.toString() === player.toString()}'>
                <strong>{{player.getName()}}</strong> ({{'#'+player.number}}) <span ng-if='player.hero' class='glyphicon glyphicon-chevron-up'></span>
                <span class='pull-right'>
                    <!--<span class='col-md-3'>-->
                        <!--{{ player.stats.batting.getSlash() }}-->
                    <!--</span>-->
                    <span>
                        {{ t('Eye :') }} <rating-block rating-block='' rating='player.skill.offense.eye'></rating-block>
                    </span>
                    <span>
                        {{ t('Power :') }} <rating-block rating-block='' rating='player.skill.offense.power'></rating-block>
                    </span>
                    <span>
                        {{ t('Speed :') }} <rating-block rating-block='' rating='player.skill.offense.speed'></rating-block>
                    </span>
                </span>
                <div class='row'></div>
            </li>
            <li class='list-group-item pointer' ng-repeat='(key, player) in team.substituted track by $index'>
                <strong>{{player.getName()}}</strong> ({{'#'+player.number}}) <span ng-if='player.hero' class='glyphicon glyphicon-chevron-up'></span>
                <span class='pull-right'>
                    {{ t('Substituted') }}
                </span>
                <div class='row'></div>
            </li>
        </ul>
    </div>
    <div class='block col-lg-12' ng-if='y.stage == "end"'>
        <ul class="list-group pitch-record col-xs-12">
            <li class='list-group-item' ng-repeat="event in y.log.record[mode()] track by $index">
                {{event}}
            </li>
        </ul>
    </div>
    <hr>
    <div style='margin-bottom: 30px;'>
        <button ng-click='teamJapan()' class='btn pointer'>
            {{ t('Play against Team Japan') }}
        </button>
        <hr>
        <p ng-show='mode() === "e"'>
            Clicking here will substitute the opposing team (away) with storied representatives of Japan. (Hard Mode)
        </p>
        <p ng-show='mode() === "n"'>
            向こうのチームはベンチがすごいかも。
        </p>
    </div>
    <aside class='mousehover' ng-show='message'>
        {{ message }}
    </aside>
</div>
</body>
</html>
