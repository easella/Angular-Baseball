<!DOCTYPE html>
<script>
    window.log = function() {
        console.log.apply(console, arguments);
    };
</script>
<html>
    <head>
        <meta charset="utf-8">
        <title>野球愛好会</title>
        <script src="js/external/angular/angular.js"></script>
        <script src="js/external/jquery/jquery-1.10.2.min.js"></script>

        <script src="js/internal/application.js"></script>

        <link rel="shortcut icon" href="yakk.ico">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <link href="css/external/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body class='blue'>
        <div class='container' ng-app='YakyuuAikoukai' ng-controller='IndexController'>
            <div class='blocking instructions' ng-click="proceedToGame()">
                <div class='row'>
                    <div class='col-md-4'>
                        <p>When pitching, click to throw. A crudely css'd wheel of cheese in side profile
                            which is actually representing a bat will indicate where the opponent swung
                            while the cross-section of a candy cane which is really a ball will indicate
                            where the ball was thrown (transparent) and where it broke (opaque).</p>
                    </div>
                    <div class="no-swing col-md-4">
                        <div class="target {{y.stage}}">
                            <div class='indicator pitch' style='top:125px;left:155px;'></div>
                            <div class='indicator break' style='top:145px;left:135px;'></div>
                            <div class='indicator swing' style='top:100px;left:100px;'></div>
                            <div class='strikezone'></div>
                        </div>
                    </div>
                    <div class='col-md-4'>
                        <p>
                            You can call for a different pitch by clicking on the pitch name in the pitching data display
                            in the lower left.
                        </p>
                    </div>
                </div>
                <div class='row'>
                    <div class='col-md-4'>
                        <p>When batting, you'll see a ball with a shadow indicating the direction it broke from.
                        Click inside the strike or ball zone to swing, or click on the side to the left or right of the ball zone to hold up (not swing).</p>
                    </div>
                    <div class="no-swing col-md-4">
                        <div class="target {{y.stage}}">
                            <div class='indicator pitch' style='top:125px;left:155px;'></div>
                            <div class='indicator break' style='top:145px;left:135px;'></div>
                            <div class='strikezone'></div>
                        </div>
                    </div>
                </div>
                <div>
                    <em>Click anywhere to continue</em>
                </div>
            </div>
            <div class='header scoreboard row'>
                <div class='col-md-3'>
                    <div class='text-center on-base padded'>
                        <span class='grey'>{{y.field.second.getSurname() || 'Empty'}}</span>
                    </div>
                    <div class=''>
                        <div class='padded col-xs-5 on-base side-base-indicator'>
                            <span class='grey'>{{y.field.third.getSurname() || 'Empty'}}</span>
                        </div>
                        <div class='text-center col-xs-2'>
                            <div class='bases'>
                                <div class='diamond-bg'>
                                    <div class='diamond {{y.field.second != null ? "filled" : ""}}'></div>
                                </div>
                                <div class='diamond-bg first'>
                                    <div class='diamond {{y.field.first != null ? "filled" : ""}}'></div>
                                </div>
                                <div class='diamond-bg third'>
                                    <div class='diamond {{y.field.third != null ? "filled" : ""}}'></div>
                                </div>
                            </div>
                        </div>
                        <div class='padded col-xs-5 on-base side-base-indicator'>
                            <span class='grey'>{{y.field.first.getSurname() || 'Empty'}}</span>
                        </div>
                    </div>
                </div>
                <div class='col-md-6'>
                    <div class='center-block row'>
                        <div class='team-names col-md-3'>
                            <table class='table'>
                                <tr>
                                    <td>&nbsp;</td>
                                </tr>
                                <tr ng-repeat="team in y.teams">
                                    <td><span class='grey'>{{team.name}}</span></td>
                                </tr>
                            </table>
                        </div>
                        <div class="scores col-md-6">
                            <table class='table'>
                                <tr>
                                    <td class='font-yellow' ng-repeat="(block, value) in y.scoreboard.home">
                                        <span class='grey'>{{block}}</span>
                                    </td>
                                </tr>
                                <tr class="team-line" ng-repeat="(side, scores) in y.scoreboard">
                                    <td class='' ng-repeat="(inning, score) in scores">
                                        <span class='grey'>{{y.inning < inning || y.inning == inning && side == 'home' && y.half == 'top' ? '-' : score}}</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="tallies col-md-3">
                            <table class='table'>
                                <tr>
                                    <td>
                                        <span class='grey font-yellow'>H</span>
                                    </td>
                                    <td>
                                        <span class='grey font-yellow'>R</span>
                                    </td>
                                    <td>
                                        <span class='grey font-yellow'>E</span>
                                    </td>
                                </tr>
                                <tr ng-repeat="side in y.tally">
                                    <td>
                                        <span class='grey'>{{side.H}}</span>
                                    </td>
                                    <td>
                                        <span class='grey'>{{side.R}}</span>
                                    </td>
                                    <td>
                                        <span class='grey'>{{side.E}}</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class='col-md-3'>
                    <div class="umpire padded">
                        <div class='row'>
                            <div class='col-xs-3 grey'>S</div>
                            <div class='col-xs-3 grey'>
                                <div class='circle {{y.umpire.count.strikes >= 1 ? "orange" : "unlit"}}'></div>
                            </div>
                            <div class='col-xs-3 grey'>
                                <div class='circle {{y.umpire.count.strikes >= 2 ? "orange" : "unlit"}}'></div>
                            </div>
                            <div class='col-xs-3'>
                            </div>
                        </div>
                        <div class='row'>
                            <div class='col-xs-3 grey'>B</div>
                            <div class='col-xs-3 grey'>
                                <div class='circle {{y.umpire.count.balls >= 1 ? "green" : "unlit"}}'></div>
                            </div>
                            <div class='col-xs-3 grey'>
                                <div class='circle {{y.umpire.count.balls >= 2 ? "green" : "unlit"}}'></div>
                            </div>
                            <div class='col-xs-3 grey'>
                                <div class='circle {{y.umpire.count.balls >= 3 ? "green" : "unlit"}}'></div>
                            </div>
                        </div>
                        <div class='row'>
                            <div class='col-xs-3 grey'>O</div>
                            <div class='col-xs-3 grey'>
                                <div class='circle {{y.umpire.count.outs >= 1 ? "red" : "unlit"}}'></div>
                            </div>
                            <div class='col-xs-3 grey'>
                                <div class='circle {{y.umpire.count.outs >= 2 ? "red" : "unlit"}}'></div>
                            </div>
                            <div class='col-xs-3'>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class='jumbotron noselect row'>
                <div class='row'>
                    <div class='col-md-4 background-color visible-lg visible-md'>
                        <!--<div ng-repeat='(key, val) in y.swingResult'>-->
                            <!--{{key}} : {{val}}-->
                        <!--</div>-->
                        <ul class="list-group pitch-record">
                            <li class='list-group-item' ng-repeat="event in y.log.pitchRecord track by $index">
                                <strong ng-if="$index == 0">
                                    {{event}}
                                </strong>
                                <span ng-if="$index">
                                    {{event}}
                                </span>
                            </li>
                        </ul>
                    </div>
                    <div class='col-md-4'>
                        <div class="no-swing" ng-click="indicate($event)">
                            <div class="target {{y.stage}}">
                                <div class='indicator pitch {{!y.pitchInFlight.x ? "hide" : ""}}' style='top:{{200-y.pitchTarget.y}}px;left:{{y.pitchTarget.x}}px;'></div>
                                <div ng-class='{"hide" : y.humanBatting()}' class='indicator break {{!y.pitchInFlight.x ? "hide" : ""}}' style='top:{{200-y.pitchInFlight.y}}px;left:{{y.pitchInFlight.x}}px;'></div>
                                <div class='indicator swing {{y.swingResult.looking ? "hide" : ""}}' style='top:{{200-y.pitchInFlight.y + y.swingResult.y}}px;left:{{y.pitchInFlight.x + y.swingResult.x}}px;'></div>
                                <div class='strikezone'></div>
                            </div>
                        </div>
                        <div>
                            <div class="list-group-item umpire">
                                {{y.umpire.says}}
                            </div>
                            <div class='list-group-item'>
                                {{y.stage == 'swing' ? 'Batting, ' + y.battersEye : ''}}
                                {{y.stage == 'pitch' ? ('Pitching : ' + y.pitchInFlight.name + ' selected.') : ''}}
                            </div>
                        </div>
                    </div>
                    <div class='col-md-4 background-color visible-lg visible-md'>
                        <ul class="list-group pitch-record">
                            <li class='list-group-item' ng-repeat="event in y.log.shortRecord track by $index">
                                <strong ng-if="$index == 0">
                                    {{event}}
                                </strong>
                                <span ng-if="$index">
                                    {{event}}
                                </span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class='row list-group-item'>
                <div class='col-lg-6'>
                    <div>
                        <div class='row list-group-item'>
                            <div class='col-lg-6'>
                                <em>{{y.batter.throws == 'right' ? 'RHP' : 'LHP'}}</em> <strong>{{y.pitcher.name}}</strong> ({{y.pitcher.number}}) &raquo; {{rate(y.batter.skill.pitching)}}
                            </div>
                            <div class='col-lg-6'>
                                <em>C</em> <strong>{{y.pitcher.team.positions.catcher.name}}</strong> ({{y.pitcher.team.positions.catcher.number}}) &raquo; {{rate(y.pitcher.team.positions.catcher.skill.defense.catching)}}
                            </div>
                        </div>
                        <div class='row'></div>
                        <div>
                            <table class='list-group-item table table-condensed'>
                                <thead>
                                    <tr>
                                        <th>Pitch</th>
                                        <th class='pointer' ng-repeat='(name, pitch) in y.pitcher.pitching'>
                                            <span ng-click="selectPitch(name)">{{name}}</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Control</td><td ng-repeat='(name, pitch) in y.pitcher.pitching'>{{rate(pitch.control)}}</td>
                                    </tr>
                                    <tr>
                                        <td>Velocity</td><td ng-repeat='(name, pitch) in y.pitcher.pitching'>{{rate(pitch.velocity)}}</td>
                                    </tr>
                                    <tr>
                                        <td>Break</td><td ng-repeat='(name, pitch) in y.pitcher.pitching'>{{rate(pitch.break)}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class='col-lg-6 list-group-item'>
                    <div class='row'>
                        <div class='col-lg-6'>
                            <div>
                                <strong>{{y.batter.name}}</strong> ({{y.batter.number}}) - <em>{{abbreviatePosition(y.batter.position)}}, {{y.batter.bats == 'left' ? 'LHB' : 'RHB'}}</em>
                            </div>
                            <div>
                                Eye : {{rate(y.batter.skill.offense.eye)}}
                            </div>
                            <div>
                                Power : {{rate(y.batter.skill.offense.power)}}
                            </div>
                            <div>
                                Speed : {{rate(y.batter.skill.offense.speed)}}
                            </div>
                            <div>
                                - {{y.batter.atBats.join(', ')}} -
                            </div>
                        </div>
                        <div class='col-lg-6'>
                            <div>
                                On Deck : <strong>{{y.deck.name}}</strong> ({{y.deck.number}}) - {{abbreviatePosition(y.deck.position)}}, {{y.batter.bats == 'left' ? 'LHB' : 'RHB'}}
                            </div>
                            <div>
                                Eye : {{rate(y.deck.skill.offense.eye)}}
                            </div>
                            <div>
                                Power : {{rate(y.deck.skill.offense.power)}}
                            </div>
                            <div>
                                Speed : {{rate(y.deck.skill.offense.speed)}}
                            </div>
                            <div>
                                - {{y.deck.atBats.join(', ')}} -
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class='block col-lg-12 hidden-lg hidden-md'>
                <ul class="list-group pitch-record col-lg-6">
                    <li class='list-group-item' ng-repeat="event in y.log.pitchRecord track by $index">
                        {{event}}
                    </li>
                </ul>
                <ul class="list-group pitch-record col-lg-6">
                    <li class='list-group-item' ng-repeat="event in y.log.shortRecord track by $index">
                        {{event}}
                    </li>
                </ul>
            </div>
            <div class='clear'></div>
            <div class='col-lg-12'>
                <ul class='list-group col-lg-6'>
                    <li class='list-group-item'>
                        {{y.teams.away.name}}
                    </li>
                    <li class='list-group-item' ng-repeat="(order, player) in y.teams.away.lineup track by $index">
                        {{abbreviatePosition(player.position)}} <strong>{{player.name}}</strong> (#{{player.number}})
                        B/T: {{player.bats == 'left' ? 'L' : 'R'}}/{{player.throws == 'left' ? 'L' : 'R'}}
                        <span class='pull-right'>
                            {{player.atBats.length ? ' ' + player.atBats.join(', ') : ''}} <em>{{order == player.team.nowBatting ? ' - Up to Bat' : ''}}</em>
                        </span>
                    </li>
                </ul>
                <ul class='list-group col-lg-6'>
                    <li class='list-group-item'>
                        {{y.teams.home.name}}
                    </li>
                    <li class='list-group-item' ng-repeat="(order, player) in y.teams.home.lineup track by $index">
                        {{abbreviatePosition(player.position)}} <strong>{{player.name}}</strong> (#{{player.number}})
                        B/T: {{player.bats == 'left' ? 'L' : 'R'}}/{{player.throws == 'left' ? 'L' : 'R'}}
                        <span class='pull-right'>
                            {{player.atBats.length ? ' ' + player.atBats.join(', ') : ''}} <em>{{order == player.team.nowBatting ? ' - Up to Bat' : ''}}</em>
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html>
