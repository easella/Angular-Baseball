<div class='container'>
    <div class='blocking instructions'>
        <section class='row'>
            <div class='col-md-4'></div>
            <div class='col-md-4 language-select'>
                <button class='btn pointer' (click)='mode("e"); $event.stopPropagation()'>
                    English
                </button>
                <button class='btn pointer' (click)='mode("n"); $event.stopPropagation()'>
                    日本語
                </button>
            </div>
            <div class='col-md-4'></div>
        </section>
        <br/>
        <div class='row'>
            <div class='col-md-4'>
            </div>
            <div class="col-md-4">
                <div class="target swing">
                    <div class='indicator baseball pitch' style='top:70px;left:55px;padding:2px;'></div>
                    <div class='indicator baseball pitch' style='top:74px;left:50px;padding:3px;'></div>
                    <div class='indicator baseball pitch' style='top:82px;left:48px;padding:4px;'></div>
                    <div class='indicator baseball pitch' style='top:94px;left:55px;padding:6px;'></div>
                    <div class='indicator baseball pitch' style='top:110px;left:80px;padding:8px;'></div>
                    <div class='indicator baseball pitch' style='top:130px;left:100px;padding:10px;'></div>
                    <div class='indicator baseball break' style='top:145px;left:125px;padding:12px;'></div>
                    <div class='strikezone'></div>
                </div>
            </div>
            <div class='col-md-4'>
            </div>
        </div>
        <div class='row'>
            <div class='col-md-4'>
            </div>
            <div class="col-md-4">
            </div>
            <div class='col-md-4'>
            </div>
        </div>
        <hr>
        <section class='row options'>
            <div class='col-md-12'>
                <button (click)="proceedToGame(0, 0); $event.stopPropagation()" class='btn play-ball pointer'>
                    {{ t('Play Ball!') }}
                </button>
                <button (click)="proceedToGame(0, 1); $event.stopPropagation()" class='btn pointer'>
                    {{ t('Spectate the CPU') }}
                </button>
            </div>
            <p style='text-align: center; max-width: 340px; margin: auto;'>
                Supposing the matchmaking server hasn't crashed, you can
                share your URL (including hash) after clicking 'Play Ball!'
                to play with a live opponent.
            </p>
        </section>
        <section class='baseball-beginner text-left'>
            <hr/>
            <div class='col-md-12'>
                <button (click)='proceedToGame(1, 1); $event.stopPropagation()' class='btn pointer'>
                    {{ t('Run Fast Simulation') }} &raquo;
                </button>
                <button (click)='proceedToGame(7, 1); $event.stopPropagation()' class='btn pointer'>
                    {{ t('Play from the 7th') }} &raquo;
                </button>
            </div>
        </section>
    </div>
    <div class='play-begins' [ngClass]='{ blocked: !begin }'>
        <upper [y]='y' [t]='t'></upper>
        <div class='main-area noselect row'>
            <field [y]='y'></field>
            <div class='webgl-bg-container'></div>
            <div class='webgl-container'></div>
            <div class='row'>
                <div class='col-md-4 background-color visible-lg visible-md'>
                    <!--<div *ngFor='let (key, val) of y.swingResult'>-->
                    <!--{{key}} : {{val}}-->
                    <!--</div>-->
                    <ul class="list-group pitch-record">
                        <li class='list-group-item' *ngFor="let event of y.log.pitchRecord[mode()]; let i = index;">
                            <strong [hidden]='i > 0'>
                                {{event}}
                            </strong>
                            <span [hidden]='i === 0'>
                                {{event}}
                            </span>
                        </li>
                    </ul>
                </div>
                <div class='col-md-4'>
                    <div class='opponent-indicator' *ngIf='y.opponentConnected'>
                        <em>{{ t('Opponent connected') }}</em>
                    </div>
                    <div class='windup' [ngClass]='{winding: y.humanControl == "none" || y.humanBatting() || y.opponentConnected}'>
                    </div>
                    <div class="no-swing">
                        <div class='input-area' (click)='indicate($event)'>

                        </div>
                        <div class="target live {{y.stage}}"
                             [ngClass]='{
                                            batting: y.humanBatting(),
                                            pitching: y.humanPitching()
                                        }'>
                            <div class='indicator baseball pitch hide'></div>
                            <div class='indicator baseball break hide'></div>
                            <div class='indicator swing player'
                                 [ngStyle]='{
                                    top: 200-y.pitchInFlight.y-y.swingResult.y + "px",
                                    left: y.pitchInFlight.x + y.swingResult.x + "px",
                                    transform: "rotate(" + y.swingResult.angle + "deg) rotateY("+(y.batterRunner.bats == "left" ? 12 : -12)+"deg)"
                                }'
                                 [ngClass]='{
                                 left: y.batterRunner.bats == "left",
                                 right: y.batterRunner.bats == "right",
                                 hide: y.humanBatting() || y.swingResult.looking
                             }'>
                            </div>
                            <div class='indicator swing stance-indicator opponent'
                                 [ngClass]='{
                                left: y.batter.bats == "left",
                                right: y.batter.bats == "right",
                                hide: !y.humanBatting()
                             }'>
                            </div>
                            <div class='indicator glove stance-indicator hide'
                                 [ngClass]='{
                                left: y.pitcher.team.positions.catcher.throws == "left",
                                right: y.pitcher.team.positions.catcher.throws == "right",
                                hide: !y.humanPitching()
                             }'>
                            </div>
                            <div class='strikezone' [ngClass]='{batting: y.humanBatting(), pitching: y.humanPitching()}'>
                            <span class='strikezone-message' *ngIf='showMessage'>
                                {{ t('Click Here') }}
                            </span>
                            </div>
                        </div>
                    </div>
                    <div class='centered'>
                        <div class='batter-stats' [ngClass]='{"lefty": y.batter.bats == "left", "righty": y.batter.bats == "right"}'>
                            <button class='btn small batter-ready'
                                    *ngIf='y.batter.bats==="left" && !y.opponentConnected && y.humanBatting()'
                                    [ngClass]='{disabled: !y.batter.ready}'
                                    (click)='y.batterReady(!y.batter.ready)'>
                                {{ t('Batter Ready') }}
                            </button>
                            <section class='inline-block'>
                                <strong>{{y.batter.getName()}}</strong>
                                <br>
                                <span *ngIf='y.batter.bats==="left"'>
                                    <span *ngIf='y.batter.hero' class="glyphicon glyphicon-chevron-up"></span>
                                    {{ t('LHB') }}
                                </span>
                                <span class='defining anti-color'>
                                    {{ y.batter.getDefiningBattingCharacteristic() }}
                                </span>
                                <span *ngIf='y.batter.bats==="right"'>
                                    {{ t('RHB') }}
                                    <span *ngIf='y.batter.hero' class="glyphicon glyphicon-chevron-up"></span>
                                </span>
                            </section>
                            <button class='btn small batter-ready'
                                    *ngIf='y.batter.bats==="right" && !y.opponentConnected && y.humanBatting()'
                                    [ngClass]='{disabled: !y.batter.ready}'
                                    (click)='y.batterReady(!y.batter.ready)'>
                                {{ t('Batter Ready') }}
                            </button>
                        </div>
                    </div>
                </div>
                <div class='col-md-4 background-color visible-lg visible-md'>
                    <ul class="list-group play-record">
                        <li class='list-group-item' *ngFor="let event of y.log.shortRecord[mode()]; let i = index;">
                            <strong [hidden]='i > 0'>
                                {{event}}
                            </strong>
                            <span [hidden]='i === 0'>
                                {{event}}
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <lower [y]='y' [t]='t'></lower>
    </div>
</div>
